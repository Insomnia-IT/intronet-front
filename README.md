# Insomnia Intronet Frontend

## dev

* `yarn` - установит все зависимости
* `yarn run compile` - компилирует TS в JS в папку dist/esm и dist/typings
* `yarn run bundle:watch` - собирает бандл для фронта
* [запуск докеров](./.deploy/local/readme.md)


## Authentication

Аутентификация осуществляется посредством токенов. При страте сервера читается файл `./secrets/secret.key`, если его нет, то создается новый.
В нем лежит рандомный секрет. При создании токена JSON шифруется этим секретом. При проверке - расшифровывается.
Токен содержит username и role: 
* "superadmin": может все что угодно
* "admin": может все кроме создания токенов
* "tochka": может апрувить объявления от пользователей
Чтобы создать токен, нужно быть суперадмином и на клиенте вызвать из консоли `authStore.createToken(role, username)` 

## Import from google-sheet

Для импорта данных из гугл-щит нужен токен. Его можно сделать в Google-Client-Platform
Не забудь добавить доступ к google-sheet и google-drive

Выглядеть он должен так:

-----BEGIN PRIVATE KEY-----
сам токен
-----END PRIVATE KEY-----

Нужно взять сам токен и убрать из него переносы строк, чтобы получилась одна строка
И записать в server/.env.local
После этого можно запускать, должен прочитаться или ругнуться на нехватку прав
